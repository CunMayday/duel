<!--
Version: 2.0
Latest changes: Updated to use Firestore instead of Realtime Database
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Efe's Duel!</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <!-- Menu Screen -->
        <div id="menu-screen" class="screen active">
            <h1>Efe's Duel!</h1>
            <div class="menu-buttons">
                <button id="create-game-btn" class="menu-btn">Create New Game</button>
                <button id="join-game-btn" class="menu-btn">Join Game</button>
            </div>
            <div id="join-game-form" class="hidden">
                <input type="text" id="game-id-input" placeholder="Enter Game ID">
                <button id="join-submit-btn">Join</button>
            </div>
            <div id="game-created-info" class="hidden">
                <p>Game Created! Share this ID with your opponent:</p>
                <div class="game-id-display">
                    <span id="created-game-id"></span>
                    <button id="copy-game-id-btn">Copy</button>
                </div>
                <p>Waiting for opponent to join...</p>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="game-screen" class="screen">
            <div class="game-header">
                <h2>Efe's Duel!</h2>
                <div class="game-info">
                    <span>Game ID: <span id="current-game-id"></span></span>
                    <span id="turn-indicator"></span>
                    <button id="leave-game-btn" class="small-btn">Leave Game</button>
                </div>
            </div>

            <!-- Score Board -->
            <div class="score-board">
                <div class="player-score">
                    <span class="player-label">You</span>
                    <div class="hit-marker">
                        <div class="hit-dots">
                            <span class="hit-dot" data-value="0"></span>
                            <span class="hit-dot" data-value="1"></span>
                            <span class="hit-dot" data-value="2"></span>
                            <span class="hit-dot" data-value="3"></span>
                            <span class="hit-dot" data-value="4"></span>
                            <span class="hit-dot" data-value="5"></span>
                        </div>
                        <div id="player-score-marker" class="score-marker">0</div>
                    </div>
                </div>
                <div class="player-score">
                    <span class="player-label">Opponent</span>
                    <div class="hit-marker">
                        <div class="hit-dots">
                            <span class="hit-dot" data-value="0"></span>
                            <span class="hit-dot" data-value="1"></span>
                            <span class="hit-dot" data-value="2"></span>
                            <span class="hit-dot" data-value="3"></span>
                            <span class="hit-dot" data-value="4"></span>
                            <span class="hit-dot" data-value="5"></span>
                        </div>
                        <div id="opponent-score-marker" class="score-marker">0</div>
                    </div>
                </div>
            </div>

            <!-- Game Board (Piste) -->
            <div class="piste-container">
                <div id="piste" class="piste">
                    <!-- 23 spaces will be generated by JavaScript -->
                </div>
            </div>

            <!-- Deck Info -->
            <div class="deck-info">
                <span>Cards remaining: <span id="cards-remaining">20</span></span>
            </div>

            <!-- Action Area -->
            <div class="action-area">
                <div id="attack-strengthener" class="hidden">
                    <p>Attack declared! Select cards to strengthen (same value as attack card):</p>
                    <div id="strengthen-cards"></div>
                    <button id="finish-attack-btn">Finish Attack</button>
                </div>
                <div id="parry-area" class="hidden">
                    <p>You are being attacked! Total value: <span id="attack-value"></span></p>
                    <p>Select <span id="parry-card-count"></span> card(s) with total value <span id="parry-required-value"></span> to parry:</p>
                    <div id="parry-cards"></div>
                    <button id="finish-parry-btn">Parry</button>
                </div>
                <div id="advance-attack-area" class="hidden">
                    <p>Advance card played! Now select an attack card:</p>
                    <div id="attack-cards"></div>
                </div>
            </div>

            <!-- Player's Hand -->
            <div class="hand-container">
                <h3>Your Cards</h3>
                <div id="player-hand" class="hand">
                    <!-- Cards will be generated by JavaScript -->
                </div>
            </div>

            <!-- Action Log -->
            <div class="action-log-container">
                <h3>Action Log</h3>
                <div id="action-log" class="action-log">
                    <!-- Log entries will be added by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

    <!-- Game Scripts -->
    <script src="firebase-config.js"></script>
    <script src="game.js"></script>
    <script src="ui.js"></script>
    <script src="main.js"></script>
</body>
</html>
